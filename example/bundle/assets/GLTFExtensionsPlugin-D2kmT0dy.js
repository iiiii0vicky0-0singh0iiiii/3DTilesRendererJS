import{G as ie}from"./GLTFLoader-nx88wwE7.js";import{j as oe,aZ as ae,a_ as ce,r as ue,k as le,V as A,O as fe,g as he,ah as de,aw as j,W as me,aD as G,b as pe,a$ as ye,b0 as xe,b1 as Ae,b2 as Te,F as we}from"./three.module-CvwULque.js";import{a as be}from"./GLTFExtensionLoader-XUNwtda-.js";function y(i,e,t){return i&&e in i?i[e]:t}function Y(i){return i!=="BOOLEAN"&&i!=="STRING"&&i!=="ENUM"}function Ee(i){return/^FLOAT/.test(i)}function D(i){return/^VEC/.test(i)}function C(i){return/^MATRIX/.test(i)}function ee(i,e,t,s=null){return C(t)||D(t)?s.fromArray(i,e):i[e]}function F(i){const{type:e,componentType:t}=i;switch(e){case"SCALAR":return t==="INT64"?0n:0;case"VEC2":return new A;case"VEC3":return new le;case"VEC4":return new ue;case"MAT2":return new ce;case"MAT3":return new ae;case"MAT4":return new oe;case"BOOLEAN":return!1;case"STRING":return"";case"ENUM":return 0}}function z(i,e){if(e==null)return!1;switch(i){case"SCALAR":return typeof e=="number"||typeof e=="bigint";case"VEC2":return e.isVector2;case"VEC3":return e.isVector3;case"VEC4":return e.isVector4;case"MAT2":return e.isMatrix2;case"MAT3":return e.isMatrix3;case"MAT4":return e.isMatrix4;case"BOOLEAN":return typeof e=="boolean";case"STRING":return typeof e=="string";case"ENUM":return typeof e=="number"||typeof e=="bigint"}throw new Error("ClassProperty: invalid type.")}function O(i,e=null){switch(i){case"INT8":return Int8Array;case"INT16":return Int16Array;case"INT32":return Int32Array;case"INT64":return BigInt64Array;case"UINT8":return Uint8Array;case"UINT16":return Uint16Array;case"UINT32":return Uint32Array;case"UINT64":return BigUint64Array;case"FLOAT32":return Float32Array;case"FLOAT64":return Float64Array}switch(e){case"BOOLEAN":return Uint8Array;case"STRING":return Uint8Array}throw new Error("ClassProperty: invalid type.")}function ge(i,e=null){if(i.array){e=e&&Array.isArray(e)?e:[],e.length=i.count;for(let s=0,r=e.length;s<r;s++)e[s]=M(i,e[s])}else e=M(i,e);return e}function M(i,e=null){const t=i.default,s=i.type;if(e=e||F(i),t===null){switch(s){case"SCALAR":return 0;case"VEC2":return e.set(0,0);case"VEC3":return e.set(0,0,0);case"VEC4":return e.set(0,0,0,0);case"MAT2":return e.identity();case"MAT3":return e.identity();case"MAT4":return e.identity();case"BOOLEAN":return!1;case"STRING":return"";case"ENUM":return""}throw new Error("ClassProperty: invalid type.")}else if(C(s))e.fromArray(t);else if(D(s))e.fromArray(t);else return t}function Ie(i,e){if(i.noData===null)return e;const t=i.noData,s=i.type;if(Array.isArray(e))for(let o=0,a=e.length;o<a;o++)e[o]=r(e[o]);else e=r(e);return e;function r(o){return n(o)&&(o=M(i,o)),o}function n(o){if(C(s)){const a=o.elements;for(let c=0,f=t.length;c<f;c++)if(t[c]!==a[c])return!1;return!0}else if(D(s)){for(let a=0,c=t.length;a<c;a++)if(t[a]!==o.getComponent(a))return!1;return!0}else return t===o}}function Ne(i,e){switch(i){case"INT8":return Math.max(e/127,-1);case"INT16":return Math.max(e,32767,-1);case"INT32":return Math.max(e/2147483647,-1);case"INT64":return Math.max(Number(e)/9223372036854776e3,-1);case"UINT8":return e/255;case"UINT16":return e/65535;case"UINT32":return e/4294967295;case"UINT64":return Number(e)/18446744073709552e3}}function _e(i,e){const{type:t,componentType:s,scale:r,offset:n,normalized:o}=i;if(Array.isArray(e))for(let u=0,l=e.length;u<l;u++)e[u]=a(e[u]);else e=a(e);return e;function a(u){return C(t)?u=f(u):D(t)?u=c(u):u=m(u),u}function c(u){return u.x=m(u.x),u.y=m(u.y),"z"in u&&(u.z=m(u.z)),"w"in u&&(u.w=m(u.w)),u}function f(u){const l=u.elements;for(let d=0,p=l.length;d<p;d++)l[d]=m(l[d]);return u}function m(u){return o&&(u=Ne(s,u)),(o||Ee(s))&&(u=u*r+n),u}}function U(i,e,t=null){if(i.array){Array.isArray(e)||(e=new Array(i.count||0)),e.length=t!==null?t:i.count;for(let s=0,r=e.length;s<r;s++)z(i.type,e[s])||(e[s]=F(i))}else z(i.type,e)||(e=F(i));return e}function P(i,e){for(const t in e)t in i||delete e[t];for(const t in i){const s=i[t];e[t]=U(s,e[t])}}function Oe(i){switch(i){case"ENUM":return 1;case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":return 4;case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16;case"BOOLEAN":return-1;case"STRING":return-1;default:return-1}}class R{constructor(e,t,s=null){this.name=t.name||null,this.description=t.description||null,this.type=t.type,this.componentType=t.componentType||null,this.enumType=t.enumType||null,this.array=t.array||!1,this.count=t.count||0,this.normalized=t.normalized||!1,this.offset=t.offset||0,this.scale=y(t,"scale",1),this.max=y(t,"max",1/0),this.min=y(t,"min",-1/0),this.required=t.required||!1,this.noData=y(t,"noData",null),this.default=y(t,"default",null),this.semantic=y(t,"semantic",null),this.enumSet=null,this.accessorProperty=s,s&&(this.offset=y(s,"offset",this.offset),this.scale=y(s,"scale",this.scale),this.max=y(s,"max",this.max),this.min=y(s,"min",this.min)),t.type==="ENUM"&&(this.enumSet=e[this.enumType],this.componentType===null&&(this.componentType=y(this.enumSet,"valueType","UINT16")))}shapeToProperty(e,t=null){return U(this,e,t)}resolveDefaultElement(e){return M(this,e)}resolveDefault(e){return ge(this,e)}resolveNoData(e){return Ie(this,e)}resolveEnumsToStrings(e){const t=this.enumSet;if(this.type==="ENUM")if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=s(e[r]);else e=s(e);return e;function s(r){const n=t.values.find(o=>o.value===r);return n===null?"":n.name}}adjustValueScaleOffset(e){return Y(this.type)?_e(this,e):e}}class B{constructor(e,t={},s={},r=null){this.definition=e,this.class=t[e.class],this.className=e.class,this.enums=s,this.data=r,this.name="name"in e?e.name:null,this.properties=null}getPropertyNames(){return Object.keys(this.class.properties)}includesData(e){return!!this.definition.properties[e]}dispose(){}_initProperties(e=R){const t={};for(const s in this.class.properties)t[s]=new e(this.enums,this.class.properties[s],this.definition.properties[s]);this.properties=t}}class De extends R{constructor(e,t,s=null){super(e,t,s),this.attribute=s.attribute}}class Ce extends B{constructor(...e){super(...e),this.isPropertyAttributeAccessor=!0,this._initProperties(De)}getData(e,t,s={}){const r=this.properties;P(r,s);for(const n in r)s[n]=this.getPropertyValue(n,e,t,s[n]);return s}getPropertyValue(e,t,s,r=null){if(t>=this.count)throw new Error("PropertyAttributeAccessor: Requested index is outside the range of the buffer.");const n=this.properties[e],o=n.type;if(n){if(!this.definition.properties[e])return n.resolveDefault(r)}else throw new Error("PropertyAttributeAccessor: Requested class property does not exist.");r=n.shapeToProperty(r);const a=s.getAttribute(n.attribute.toLowerCase());if(C(o)){const c=r.elements;for(let f=0,m=c.length;f<m;f<m)c[f]=a.getComponent(t,f)}else if(D(o))r.fromBufferAttribute(a,t);else if(o==="SCALAR"||o==="ENUM")r=a.getX(t);else throw new Error("StructuredMetadata.PropertyAttributeAccessor: BOOLEAN and STRING types are not supported by property attributes.");return r=n.adjustValueScaleOffset(r),r=n.resolveEnumsToStrings(r),r=n.resolveNoData(r),r}}class Me extends R{constructor(e,t,s=null){super(e,t,s),this.values=s.values,this.valueLength=Oe(this.type),this.arrayOffsets=y(s,"arrayOffsets",null),this.stringOffsets=y(s,"stringOffsets",null),this.arrayOffsetType=y(s,"arrayOffsetType","UINT32"),this.stringOffsetType=y(s,"stringOffsetType","UINT32")}getArrayLengthFromId(e,t){let s=this.count;if(this.arrayOffsets!==null){const{arrayOffsets:r,arrayOffsetType:n}=this,o=O(n),a=new o(e[r]);s=a[t+1]-a[t]}return s}getIndexOffsetFromId(e,t){let s=t;if(this.arrayOffsets){const{arrayOffsets:r,arrayOffsetType:n}=this,o=O(n);s=new o(e[r])[s]}else this.array&&(s*=this.count);return s}}class Pe extends B{constructor(...e){super(...e),this.isPropertyTableAccessor=!0,this.count=this.definition.count,this._initProperties(Me)}getData(e,t={}){const s=this.properties;P(s,t);for(const r in s)t[r]=this.getPropertyValue(r,e,t[r]);return t}_readValueAtIndex(e,t,s,r=null){const n=this.properties[e],{componentType:o,type:a}=n,c=this.data,f=c[n.values],m=O(o,a),u=new m(f),l=n.getIndexOffsetFromId(c,t);if(Y(a)||a==="ENUM")return ee(u,(l+s)*n.valueLength,a,r);if(a==="STRING"){let d=l+s,p=0;if(n.stringOffsets!==null){const{stringOffsets:x,stringOffsetType:T}=n,E=O(T),w=new E(c[x]);p=w[d+1]-w[d],d=w[d]}const h=new Uint8Array(u.buffer,d,p);r=new TextDecoder().decode(h)}else if(a==="BOOLEAN"){const d=l+s,p=Math.floor(d/8),h=d%8;r=(u[p]>>h&1)===1}return r}getPropertyValue(e,t,s=null){if(t>=this.count)throw new Error("PropertyTableAccessor: Requested index is outside the range of the table.");const r=this.properties[e];if(r){if(!this.definition.properties[e])return r.resolveDefault(s)}else throw new Error("PropertyTableAccessor: Requested property does not exist.");const n=r.array,o=this.data,a=r.getArrayLengthFromId(o,t);if(s=r.shapeToProperty(s,a),n)for(let c=0,f=s.length;c<f;c++)s[c]=this._readValueAtIndex(e,t,c,s[c]);else s=this._readValueAtIndex(e,t,0,s);return s=r.adjustValueScaleOffset(s),s=r.resolveEnumsToStrings(s),s=r.resolveNoData(s),s}}const Le=new fe(-1,1,1,-1,0,1);class Re extends de{constructor(){super(),this.setAttribute("position",new j([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new j([0,2,0,0,2,0],2))}}const Ve=new Re;class Se{constructor(e){this._mesh=new he(Ve,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Le)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}const N=new Te,b=new class{constructor(){this._renderer=new me,this._target=new G(1,1),this._texTarget=new G,this._quad=new Se(new pe({blending:ye,blendDst:xe,blendSrc:Ae,uniforms:{map:{value:null},pixel:{value:new A}},vertexShader:`
				void main() {

					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

				}
			`,fragmentShader:`
				uniform sampler2D map;
				uniform ivec2 pixel;

				void main() {

					gl_FragColor = texelFetch( map, pixel, 0 );

				}
			`}))}increaseSizeTo(i){this._target.setSize(Math.max(this._target.width,i),1)}readDataAsync(i){const{_renderer:e,_target:t}=this;return e.readRenderTargetPixelsAsync(t,0,0,i.length/4,1,i)}readData(i){const{_renderer:e,_target:t}=this;e.readRenderTargetPixels(t,0,0,i.length/4,1,i)}renderPixelToTarget(i,e,t){const{_renderer:s,_target:r}=this;N.min.copy(e),N.max.copy(e),N.max.x+=1,N.max.y+=1,s.initRenderTarget(r),s.copyTextureToTexture(i,r.texture,N,t,0)}},v=new A,k=new A,q=new A;function Fe(i,e){return e===0?i.getAttribute("uv"):i.getAttribute(`uv${e}`)}function te(i,e,t=new Array(3)){let s=3*e,r=3*e+1,n=3*e+2;return i.index&&(s=i.index.getX(s),r=i.index.getX(r),n=i.index.getX(n)),t[0]=s,t[1]=r,t[2]=n,t}function se(i,e,t,s,r){const[n,o,a]=s,c=Fe(i,e);v.fromBufferAttribute(c,n),k.fromBufferAttribute(c,o),q.fromBufferAttribute(c,a),r.set(0,0,0).addScaledVector(v,t.x).addScaledVector(k,t.y).addScaledVector(q,t.z)}function re(i,e,t,s){const r=i.x-Math.floor(i.x),n=i.y-Math.floor(i.y),o=Math.floor(r*e%e),a=Math.floor(n*t%t);return s.set(o,a),s}const X=new A,$=new A,H=new A;class Ue extends R{constructor(e,t,s=null){super(e,t,s),this.channels=y(s,"channels",[0]),this.index=y(s,"index",null),this.texCoord=y(s,"texCoord",null),this.valueLength=parseInt(this.type.replace(/[^0-9]/g,""))||1}readDataFromBuffer(e,t,s=null){const r=this.type;if(r==="BOOLEAN"||r==="STRING")throw new Error("PropertyTextureAccessor: BOOLEAN and STRING types not supported.");return ee(e,t*this.valueLength,r,s)}}class Be extends B{constructor(...e){super(...e),this.isPropertyTextureAccessor=!0,this._asyncRead=!1,this._initProperties(Ue)}getData(e,t,s,r={}){const n=this.properties;P(n,r);const o=Object.keys(n),a=o.map(c=>r[c]);return this.getPropertyValuesAtTexel(o,e,t,s,a),o.forEach((c,f)=>r[c]=a[f]),r}async getDataAsync(e,t,s,r={}){const n=this.properties;P(n,r);const o=Object.keys(n),a=o.map(c=>r[c]);return await this.getPropertyValuesAtTexelAsync(o,e,t,s,a),o.forEach((c,f)=>r[c]=a[f]),r}getPropertyValuesAtTexelAsync(...e){this._asyncRead=!0;const t=this.getPropertyValuesAtTexel(...e);return this._asyncRead=!1,t}getPropertyValuesAtTexel(e,t,s,r,n=[]){for(;n.length<e.length;)n.push(null);n.length=e.length,b.increaseSizeTo(n.length);const o=this.data,a=this.definition.properties,c=this.properties,f=te(r,t);for(let l=0,d=e.length;l<d;l++){const p=e[l];if(!a[p])continue;const h=c[p],x=o[h.index];se(r,h.texCoord,s,f,X),re(X,x.image.width,x.image.height,$),H.set(l,0),b.renderPixelToTarget(x,$,H)}const m=new Uint8Array(e.length*4);if(this._asyncRead)return b.readDataAsync(m).then(()=>(u.call(this),n));return b.readData(m),u.call(this),n;function u(){for(let l=0,d=e.length;l<d;l++){const p=e[l],h=c[p],x=h.type;if(n[l]=U(h,n[l]),h){if(!a[p]){n[l]=h.resolveDefault(n);continue}}else throw new Error("PropertyTextureAccessor: Requested property does not exist.");const T=h.valueLength*(h.count||1),E=h.channels.map(g=>m[4*l+g]),w=h.componentType,V=O(w,x),S=new V(T);if(new Uint8Array(S.buffer).set(E),h.array){const g=n[l];for(let I=0,ne=g.length;I<ne;I++)g[I]=h.readDataFromBuffer(S,I,g[I])}else n[l]=h.readDataFromBuffer(S,0,n[l]);n[l]=h.adjustValueScaleOffset(n[l]),n[l]=h.resolveEnumsToStrings(n[l]),n[l]=h.resolveNoData(n[l])}}}dispose(){this.data.forEach(e=>{e&&(e.dispose(),e.image instanceof ImageBitmap&&e.image.close())})}}class W{constructor(e,t,s,r=null,n=null){const{schema:o,propertyTables:a=[],propertyTextures:c=[],propertyAttributes:f=[]}=e,{enums:m,classes:u}=o,l=a.map(h=>new Pe(h,u,m,s));let d=[],p=[];r&&(r.propertyTextures&&(d=r.propertyTextures.map(h=>new Be(c[h],u,m,t))),r.propertyAttributes&&(p=r.propertyAttributes.map(h=>new Ce(f[h],u,m)))),this.schema=o,this.tableAccessors=l,this.textureAccessors=d,this.attributeAccessors=p,this.object=n,this.textures=t,this.nodeMetadata=r}getPropertyTableData(e,t,s=null){if(!Array.isArray(e)||!Array.isArray(t))s=s||{},s=this.tableAccessors[e].getData(t,s);else{s=s||[];const r=Math.min(e.length,t.length);s.length=r;for(let n=0;n<r;n++){const o=this.tableAccessors[e[n]];s[n]=o.getData(t[n],s[n])}}return s}getPropertyTableInfo(e=null){if(e===null&&(e=this.tableAccessors.map((t,s)=>s)),Array.isArray(e))return e.map(t=>{const s=this.tableAccessors[t];return{name:s.name,className:s.definition.class}});{const t=this.tableAccessors[e];return{name:t.name,className:t.definition.class}}}getPropertyTextureData(e,t,s=[]){const r=this.textureAccessors;s.length=r.length;for(let n=0;n<r.length;n++){const o=r[n];s[n]=o.getData(e,t,this.object.geometry,s[n])}return s}async getPropertyTextureDataAsync(e,t,s=[]){const r=this.textureAccessors;s.length=r.length;const n=[];for(let o=0;o<r.length;o++){const c=r[o].getDataAsync(e,t,this.object.geometry,s[o]).then(f=>{s[o]=f});n.push(c)}return await Promise.all(n),s}getPropertyTextureInfo(){return this.textureAccessors}getPropertyAttributeData(e,t=[]){const s=this.attributeAccessors;t.length=s.length;for(let r=0;r<s.length;r++){const n=s[r];t[r]=n.getData(e,this.object.geometry,t[r])}return t}getPropertyAttributeInfo(){return this.attributeAccessors.map(e=>({name:e.name,className:e.definition.class}))}dispose(){this.textureAccessors.forEach(e=>e.dispose()),this.tableAccessors.forEach(e=>e.dispose()),this.attributeAccessors.forEach(e=>e.dispose())}}const _="EXT_structural_metadata";function je(i,e=[]){var r;const t=((r=i.json.textures)==null?void 0:r.length)||0,s=new Array(t).fill(null);return e.forEach(({properties:n})=>{for(const o in n){const{index:a}=n[o];s[a]===null&&(s[a]=i.loadTexture(a))}}),Promise.all(s)}function Ge(i,e=[]){var r;const t=((r=i.json.bufferViews)==null?void 0:r.length)||0,s=new Array(t).fill(null);return e.forEach(({properties:n})=>{for(const o in n){const{values:a,arrayOffsets:c,stringOffsets:f}=n[o];s[a]===null&&(s[a]=i.loadBufferView(a)),s[c]===null&&(s[c]=i.loadBufferView(c)),s[f]===null&&(s[f]=i.loadBufferView(f))}}),Promise.all(s)}class ze{constructor(e){this.parser=e,this.name=_}async afterRoot({scene:e,parser:t}){const s=t.json.extensionsUsed;if(!s||!s.includes(_))return;let r=null,n=t.json.extensions[_];if(n.schemaUri){const{manager:f,path:m,requestHeader:u,crossOrigin:l}=t.options,d=new URL(n.schemaUri,m).toString(),p=new we(f);p.setCrossOrigin(l),p.setResponseType("json"),p.setRequestHeader(u),r=p.loadAsync(d).then(h=>{n={...n,schema:h}})}const[o,a]=await Promise.all([je(t,n.propertyTextures),Ge(t,n.propertyTables),r]),c=new W(n,o,a);e.userData.structuralMetadata=c,e.traverse(f=>{if(t.associations.has(f)){const{meshes:m,primitives:u}=t.associations.get(f),l=t.json.meshes[m].primitives[u];if(l&&l.extensions&&l.extensions[_]){const d=l.extensions[_];f.userData.structuralMetadata=new W(n,o,a,d,f)}else f.userData.structuralMetadata=c}})}}const Z=new A,K=new A,Q=new A;function ve(i){return i.x>i.y&&i.x>i.z?0:i.y>i.z?1:2}class ke{constructor(e,t,s){this.geometry=e,this.textures=t,this.data=s,this._asyncRead=!1,this.featureIds=s.featureIds.map(r=>{const{texture:n,...o}=r,a={label:null,propertyTable:null,nullFeatureId:null,...o};return n&&(a.texture={texCoord:0,channels:[0],...n}),a})}getTextures(){return this.textures}getFeatureInfo(){return this.featureIds}getFeaturesAsync(...e){this._asyncRead=!0;const t=this.getFeatures(...e);return this._asyncRead=!1,t}getFeatures(e,t){const{geometry:s,textures:r,featureIds:n}=this,o=new Array(n.length).fill(null),a=n.length;b.increaseSizeTo(a);const c=te(s,e),f=c[ve(t)];for(let l=0,d=n.length;l<d;l++){const p=n[l],h="nullFeatureId"in p?p.nullFeatureId:null;if("texture"in p){const x=r[p.texture.index];se(s,p.texture.texCoord,t,c,Z),re(Z,x.image.width,x.image.height,K),Q.set(l,0),b.renderPixelToTarget(r[p.texture.index],K,Q)}else if("attribute"in p){const T=s.getAttribute(`_feature_id_${p.attribute}`).getX(f);T!==h&&(o[l]=T)}else{const x=f;x!==h&&(o[l]=x)}}const m=new Uint8Array(a*4);if(this._asyncRead)return b.readDataAsync(m).then(()=>(u(),o));return b.readData(m),u(),o;function u(){const l=new Uint32Array(1);for(let d=0,p=n.length;d<p;d++){const h=n[d],x="nullFeatureId"in h?h.nullFeatureId:null;if("texture"in h){const{channels:T}=h.texture,E=T.map(V=>m[4*d+V]);new Uint8Array(l.buffer).set(E);const w=l[0];w!==x&&(o[d]=w)}}}}dispose(){this.textures.forEach(e=>{e&&(e.dispose(),e.image instanceof ImageBitmap&&e.image.close())})}}const L="EXT_mesh_features";function J(i,e,t){i.traverse(s=>{if(e.associations.has(s)){const{meshes:r,primitives:n}=e.associations.get(s),o=e.json.meshes[r].primitives[n];o&&o.extensions&&o.extensions[L]&&t(s,o.extensions[L])}})}class qe{constructor(e){this.parser=e,this.name=L}async afterRoot({scene:e,parser:t}){var a;const s=t.json.extensionsUsed;if(!s||!s.includes(L))return;const r=((a=t.json.textures)==null?void 0:a.length)||0,n=new Array(r).fill(null);J(e,t,(c,{featureIds:f})=>{f.forEach(m=>{if(m.texture&&n[m.texture.index]===null){const u=m.texture.index;n[u]=t.loadTexture(u)}})});const o=await Promise.all(n);J(e,t,(c,f)=>{c.userData.meshFeatures=new ke(c.geometry,o,f)})}}class We{constructor(e){e={metadata:!0,rtc:!0,plugins:[],dracoLoader:null,ktxLoader:null,meshoptDecoder:null,autoDispose:!0,...e},this.tiles=null,this.metadata=e.metadata,this.rtc=e.rtc,this.plugins=e.plugins,this.dracoLoader=e.dracoLoader,this.ktxLoader=e.ktxLoader,this.meshoptDecoder=e.meshoptDecoder,this._gltfRegex=/\.(gltf|glb)$/g,this._dracoRegex=/\.drc$/g,this._loader=null}init(e){const t=new ie(e.manager);this.dracoLoader&&(t.setDRACOLoader(this.dracoLoader),e.manager.addHandler(this._dracoRegex,this.dracoLoader)),this.ktxLoader&&t.setKTX2Loader(this.ktxLoader),this.meshoptDecoder&&t.setMeshoptDecoder(this.meshoptDecoder),this.rtc&&t.register(()=>new be),this.metadata&&(t.register(()=>new ze),t.register(()=>new qe)),this.plugins.forEach(s=>t.register(s)),e.manager.addHandler(this._gltfRegex,t),this.tiles=e,this._loader=t}dispose(){this.tiles.manager.removeHandler(this._gltfRegex),this.tiles.manager.removeHandler(this._dracoRegex),this.autoDispose&&(this.ktxLoader.dispose(),this.dracoLoader.dispose())}}export{Se as F,We as G};
